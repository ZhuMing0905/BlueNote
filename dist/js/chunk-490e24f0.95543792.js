(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-490e24f0"],{"02de":function(t,e,i){"use strict";function s(t){var e=window.getComputedStyle(t),i="none"===e.display,s=null===t.offsetParent&&"fixed"!==e.position;return i||s}i.d(e,"a",(function(){return s}))},"159b":function(t,e,i){var s=i("da84"),r=i("fdbc"),a=i("17c2"),n=i("9112");for(var o in r){var c=s[o],h=c&&c.prototype;if(h&&h.forEach!==a)try{n(h,"forEach",a)}catch(l){h.forEach=a}}},"17c2":function(t,e,i){"use strict";var s=i("b727").forEach,r=i("a640"),a=i("ae40"),n=r("forEach"),o=a("forEach");t.exports=n&&o?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},"1b6d":function(t,e,i){"use strict";i("df0a")},2994:function(t,e,i){"use strict";i("68ef"),i("e3b3"),i("c0c2")},"2bdd":function(t,e,i){"use strict";var s=i("d282"),r=i("02de"),a=i("a8c1"),n=i("5fbe"),o=i("543e"),c=Object(s["a"])("list"),h=c[0],l=c[1],u=c[2];e["a"]=h({mixins:[Object(n["a"])((function(t){this.scroller||(this.scroller=Object(a["b"])(this.$el)),t(this.scroller,"scroll",this.check)}))],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},updated:function(){this.innerLoading=this.loading},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var t=this;this.$nextTick((function(){if(!(t.innerLoading||t.finished||t.error)){var e,i=t.$el,s=t.scroller,a=t.offset,n=t.direction;e=s.getBoundingClientRect?s.getBoundingClientRect():{top:0,bottom:s.innerHeight};var o=e.bottom-e.top;if(!o||Object(r["a"])(i))return!1;var c=!1,h=t.$refs.placeholder.getBoundingClientRect();c="up"===n?e.top-h.top<=a:h.bottom-e.bottom<=a,c&&(t.innerLoading=!0,t.$emit("input",!0),t.$emit("load"))}}))},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var t=this.$createElement;if(this.innerLoading&&!this.finished)return t("div",{key:"loading",class:l("loading")},[this.slots("loading")||t(o["a"],{attrs:{size:"16"}},[this.loadingText||u("loading")])])},genFinishedText:function(){var t=this.$createElement;if(this.finished){var e=this.slots("finished")||this.finishedText;if(e)return t("div",{class:l("finished-text")},[e])}},genErrorText:function(){var t=this.$createElement;if(this.error){var e=this.slots("error")||this.errorText;if(e)return t("div",{on:{click:this.clickErrorText},class:l("error-text")},[e])}}},render:function(){var t=arguments[0],e=t("div",{ref:"placeholder",key:"placeholder",class:l("placeholder")});return t("div",{class:l(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():e,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():e])}})},4160:function(t,e,i){"use strict";var s=i("23e7"),r=i("17c2");s({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},8418:function(t,e,i){"use strict";var s=i("c04e"),r=i("9bf2"),a=i("5c6c");t.exports=function(t,e,i){var n=s(e);n in t?r.f(t,n,a(0,i)):t[n]=i}},"99af":function(t,e,i){"use strict";var s=i("23e7"),r=i("d039"),a=i("e8b5"),n=i("861d"),o=i("7b0b"),c=i("50c4"),h=i("8418"),l=i("65f0"),u=i("1dde"),d=i("b622"),f=i("2d00"),g=d("isConcatSpreadable"),p=9007199254740991,v="Maximum allowed index exceeded",m=f>=51||!r((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),b=u("concat"),y=function(t){if(!n(t))return!1;var e=t[g];return void 0!==e?!!e:a(t)},S=!m||!b;s({target:"Array",proto:!0,forced:S},{concat:function(t){var e,i,s,r,a,n=o(this),u=l(n,0),d=0;for(e=-1,s=arguments.length;e<s;e++)if(a=-1===e?n:arguments[e],y(a)){if(r=c(a.length),d+r>p)throw TypeError(v);for(i=0;i<r;i++,d++)i in a&&h(u,d,a[i])}else{if(d>=p)throw TypeError(v);h(u,d++,a)}return u.length=d,u}})},a434:function(t,e,i){"use strict";var s=i("23e7"),r=i("23cb"),a=i("a691"),n=i("50c4"),o=i("7b0b"),c=i("65f0"),h=i("8418"),l=i("1dde"),u=i("ae40"),d=l("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,p=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!d||!f},{splice:function(t,e){var i,s,l,u,d,f,b=o(this),y=n(b.length),S=r(t,y),L=arguments.length;if(0===L?i=s=0:1===L?(i=0,s=y-S):(i=L-2,s=p(g(a(e),0),y-S)),y+i-s>v)throw TypeError(m);for(l=c(b,s),u=0;u<s;u++)d=S+u,d in b&&h(l,u,b[d]);if(l.length=s,i<s){for(u=S;u<y-s;u++)d=u+s,f=u+i,d in b?b[f]=b[d]:delete b[f];for(u=y;u>y-s+i;u--)delete b[u-1]}else if(i>s)for(u=y-s;u>S;u--)d=u+s-1,f=u+i-1,d in b?b[f]=b[d]:delete b[f];for(u=0;u<i;u++)b[u+S]=arguments[u+2];return b.length=y-s+i,l}})},a640:function(t,e,i){"use strict";var s=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&s((function(){i.call(null,e||function(){throw 1},1)}))}},c0c2:function(t,e,i){},cb80:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("van-nav-bar",{attrs:{title:"搜索"}}),i("div",{staticClass:"search"},[i("div",{staticClass:"searchBtn"},[i("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{search:t.searchResult},nativeOn:{click:function(e){return e.stopPropagation(),t.searchFocus(e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.searchHistoryShow,expression:"searchHistoryShow"}],staticClass:"searchHistory"},[i("ul",[t._l(t.searchHistoryList,(function(e,s){return i("li",{key:s,staticClass:"van-hairline--bottom",on:{click:function(i){return i.stopPropagation(),t.setSearchResult(e)}}},[i("i",[t._v(t._s(t._f("numberFilter")(s+1))+".")]),i("p",[t._v(t._s(e))])])})),i("li",{directives:[{name:"show",rawName:"v-show",value:t.searchHistoryNone,expression:"searchHistoryNone"}],staticClass:"clear"},[t._v("暂无搜索记录")]),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.searchHistoryNone,expression:"!searchHistoryNone"}],staticClass:"clear",on:{click:function(e){return e.stopPropagation(),t.clearHistoryItems(e)}}},[t._v("清除搜索记录")])],2)]),i("div",{staticClass:"searchResult"},[i("van-list",{attrs:{finished:t.finished,"finished-text":t.finishedText,"error-text":"请求失败，点击重新加载",offset:"50"},on:{load:t.searchResultMore},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("ul",t._l(t.searchResultList,(function(e,s){return i("li",{key:s},[i("router-link",{attrs:{to:{path:"/article",name:"Article",query:{id:e.id}}}},[t._v(t._s(t._f("numberFilter")(s+1))+" - "+t._s(e.title)+" - "+t._s(e.author))])],1)})),0)])],1)])],1)},r=[],a=(i("99af"),i("4160"),i("a434"),i("b0c0"),i("159b"),i("ade3")),n=(i("2994"),i("2bdd")),o=(i("e7e5"),i("d399")),c=(i("68ef"),i("9d70"),i("3743"),i("1a04"),i("1146"),i("f032"),i("2638")),h=i.n(c),l=i("c31d"),u=i("d282"),d=i("ba31"),f=i("1325"),g=i("565f"),p=Object(u["a"])("search"),v=p[0],m=p[1],b=p[2];function y(t,e,i,s){function r(){if(i.label||e.label)return t("div",{class:m("label")},[i.label?i.label():e.label])}function a(){if(e.showAction)return t("div",{class:m("action"),attrs:{role:"button",tabindex:"0"},on:{click:r}},[i.action?i.action():e.actionText||b("cancel")]);function r(){i.action||(Object(d["a"])(s,"input",""),Object(d["a"])(s,"cancel"))}}var n={attrs:s.data.attrs,on:Object(l["a"])({},s.listeners,{keypress:function(t){13===t.keyCode&&(Object(f["c"])(t),Object(d["a"])(s,"search",e.value)),Object(d["a"])(s,"keypress",t)}})},o=Object(d["b"])(s);return o.attrs=void 0,t("div",h()([{class:m({"show-action":e.showAction}),style:{background:e.background}},o]),[null==i.left?void 0:i.left(),t("div",{class:m("content",e.shape)},[r(),t(g["a"],h()([{attrs:{type:"search",border:!1,value:e.value,leftIcon:e.leftIcon,rightIcon:e.rightIcon,clearable:e.clearable,clearTrigger:e.clearTrigger},scopedSlots:{"left-icon":i["left-icon"],"right-icon":i["right-icon"]}},n]))]),a()])}y.props={value:String,label:String,rightIcon:String,actionText:String,background:String,showAction:Boolean,clearTrigger:String,shape:{type:String,default:"square"},clearable:{type:Boolean,default:!0},leftIcon:{type:String,default:"search"}};var S,L=v(y),w=(i("5246"),i("6b41")),x={name:"Search",components:(S={},Object(a["a"])(S,w["a"].name,w["a"]),Object(a["a"])(S,L.name,L),Object(a["a"])(S,o["a"].name,o["a"]),Object(a["a"])(S,n["a"].name,n["a"]),S),props:{},data:function(){return{member:this.$store.state.member,memberAuth:this.$store.state.member_auth,value:"",searchHistoryShow:!1,searchHistoryList:JSON.parse(localStorage.getItem("historyItems"))||[],searchHistoryNone:!0,page:1,searchResultList:this.$store.state.searchResult,loading:!1,finished:!0,finishedText:"",total:0}},watch:{},computed:{},methods:{watchScroll:function(){this.searchHistoryShow=!1},searchFocus:function(){this.searchHistoryShow=!0,0==this.searchHistoryList.length?this.searchHistoryNone=!0:this.searchHistoryNone=!1},searchResult:function(t){""==t?(this.$toast.fail("请输入的关键词"),this.finished=!0):(this.appendKeywords(t),0==this.searchHistoryList.length?this.searchHistoryNone=!0:this.searchHistoryNone=!1,this.searchHistoryShow=!1,this.upSearchResult())},setSearchResult:function(t){this.value=t,this.searchHistoryShow=!1,this.upSearchResult(),this.appendKeywords(t)},clearHistoryItems:function(){localStorage.removeItem("historyItems"),this.searchHistoryList=[],this.searchHistoryNone=!0,this.searchResultList=[],this.$store.commit("setSearchResult",[])},appendKeywords:function(t){var e=!0;null!==this.searchHistoryList&&void 0!==this.searchHistoryList&&this.searchHistoryList.length>0?(this.searchHistoryList.forEach((function(i,s,r){if(i===t)return r.splice(s,1),r.unshift(t),void(e=!1)})),!0===e&&(this.searchHistoryList.length>=10?(this.searchHistoryList.unshift(t),this.searchHistoryList.pop()):this.searchHistoryList.unshift(t),localStorage.setItem("historyItems",JSON.stringify(this.searchHistoryList)))):(this.searchHistoryList=[],this.searchHistoryList.push(t),localStorage.setItem("historyItems",JSON.stringify(this.searchHistoryList)))},getSearchList:function(){var t=this;t.axios.get("/api&appsecret=PHPCMF3458092B107BA&api_auth_code="+t.memberAuth+"&api_auth_uid="+t.member.uid+"&s=note&c=search&pagesize=8&catid=9&uid="+t.member.uid+"&page="+t.page+"&keyword="+t.value).then((function(e){200==e.status&&(t.total=e.data.data.sototal,1==t.page?(t.searchResultList=e.data.data.list,t.$store.dispatch("setSearchResult",t.searchResultList)):(t.searchResultList=t.searchResultList.concat(e.data.data.list),t.$store.dispatch("setSearchResult",t.searchResultList)),t.loading=!1,0==e.data.data.list.length?(t.finished=!0,t.finishedText="暂无数据"):t.searchResultList.length==t.total&&(t.finished=!0,t.finishedText="没有更多啦"))})).catch((function(t){console.log(t)}))},searchResultMore:function(){""!==this.memberAuth?(this.getSearchList(),this.page++):this.finished=!0},upSearchResult:function(){this.searchResultList=[],this.loading=!0,this.finished=!1,this.page=1,this.total=0,this.searchResultMore()}},created:function(){},mounted:function(){var t=this;document.body.addEventListener("click",(function(){t.searchHistoryShow=!1}),!1),window.addEventListener("scroll",this.watchScroll,!0)}},H=x,T=(i("1b6d"),i("2877")),k=Object(T["a"])(H,s,r,!1,null,"d110bf8c",null);e["default"]=k.exports},df0a:function(t,e,i){},f032:function(t,e,i){},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-490e24f0.95543792.js.map