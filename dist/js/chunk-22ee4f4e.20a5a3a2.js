(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22ee4f4e"],{2527:function(t,e,n){"use strict";n.r(e);var i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"addNote"},[n("van-nav-bar",{attrs:{title:"新增","left-arrow":""},on:{"click-left":t.onClickLeft}}),t.needLogin?t._e():n("div",{staticClass:"needLogin"},[t._v("还没有登录账号，"),n("router-link",{attrs:{to:{name:"Login"}}},[t._v("请先登录")])],1),n("div",{staticClass:"addNoteForm"},[n("van-form",{on:{submit:t.onSubmit}},[n("van-field",{attrs:{name:"title",label:"标题",placeholder:"请填写标题",rules:[{required:!0,message:"请填写标题"}]},model:{value:t.noteTitle,callback:function(e){t.noteTitle=e},expression:"noteTitle"}}),n("van-field",{attrs:{type:"textarea",rows:"5",maxlength:"500","show-word-limit":"",autosize:"",name:"info",label:"内容",placeholder:"请填写内容",rules:[{required:!0,message:"请填写内容"}]},model:{value:t.noteInfo,callback:function(e){t.noteInfo=e},expression:"noteInfo"}}),n("van-field",{attrs:{label:"录入时间",name:"time"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info",disabled:!t.needLogin,"native-type":"submit"}},[t._v(" 保存 ")])],1)],1)],1)],1)},a=[],r=(n("b0c0"),n("ade3")),l=(n("e7e5"),n("d399")),s=(n("38d5"),n("772a")),c=(n("66b9"),n("b650")),u=(n("be7f"),n("565f")),d=(n("5246"),n("6b41")),f={name:"AddNote",components:(i={},Object(r["a"])(i,d["a"].name,d["a"]),Object(r["a"])(i,u["a"].name,u["a"]),Object(r["a"])(i,c["a"].name,c["a"]),Object(r["a"])(i,s["a"].name,s["a"]),Object(r["a"])(i,l["a"].name,l["a"]),i),props:{},data:function(){return{noteTitle:"",noteInfo:"",time:"",member:this.$store.state.member,memberAuth:this.$store.state.member_auth}},watch:{},computed:{needLogin:function(){return!!this.$store.state.member_auth}},methods:{onClickLeft:function(){this.$router.go(-1)},getTime:function(){this.time=this.$moment().format("YYYY-MM-DD HH:mm:ss")},onSubmit:function(){var t=this;t.axios.post("/api&appsecret=PHPCMF3458092B107BA&api_auth_code="+t.memberAuth+"&api_auth_uid="+t.member.id+"&s=member&app=note&c=home&m=add",t.$qs.stringify({is_ajax:1,catid:9,"data[title]":t.noteTitle,"data[content]":t.noteInfo,"data[inputtime]":t.time,"data[updatetime]":t.time,"data[author]":t.member.username}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){console.log(e),0==e.data.code?t.$toast(e.data.msg):e.data.code>0&&t.$toast.loading({message:"发布成功，正在跳转...",forbidClick:!0,onClose:function(){t.$router.push({path:"/home"})}})})).catch((function(t){console.log("请求失败"+t)}))}},created:function(){},mounted:function(){this.getTime()}},m=f,h=(n("b47b"),n("2877")),b=Object(h["a"])(m,o,a,!1,null,"0e97cce2",null);e["default"]=b.exports},"38d5":function(t,e,n){"use strict";n("68ef")},"599d":function(t,e,n){},"66b9":function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("e3b3"),n("bc1b")},"772a":function(t,e,n){"use strict";var i=n("d282"),o=n("db85"),a=Object(i["a"])("form"),r=a[0],l=a[1];e["a"]=r({props:{colon:Boolean,labelWidth:[Number,String],labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,errorMessageAlign:String,submitOnEnter:{type:Boolean,default:!0},validateTrigger:{type:String,default:"onBlur"},showError:{type:Boolean,default:!0},showErrorMessage:{type:Boolean,default:!0}},provide:function(){return{vanForm:this}},data:function(){return{fields:[]}},methods:{validateSeq:function(){var t=this;return new Promise((function(e,n){var i=[];t.fields.reduce((function(t,e){return t.then((function(){if(!i.length)return e.validate().then((function(t){t&&i.push(t)}))}))}),Promise.resolve()).then((function(){i.length?n(i):e()}))}))},validateAll:function(){var t=this;return new Promise((function(e,n){Promise.all(t.fields.map((function(t){return t.validate()}))).then((function(t){t=t.filter((function(t){return t})),t.length?n(t):e()}))}))},validate:function(t){return t?this.validateField(t):this.validateFirst?this.validateSeq():this.validateAll()},validateField:function(t){var e=this.fields.filter((function(e){return e.name===t}));return e.length?new Promise((function(t,n){e[0].validate().then((function(e){e?n(e):t()}))})):Promise.reject()},resetValidation:function(t){this.fields.forEach((function(e){t&&e.name!==t||e.resetValidation()}))},scrollToField:function(t,e){this.fields.some((function(n){return n.name===t&&(n.$el.scrollIntoView(e),!0)}))},addField:function(t){this.fields.push(t),Object(o["a"])(this.fields,this)},removeField:function(t){this.fields=this.fields.filter((function(e){return e!==t}))},getValues:function(){return this.fields.reduce((function(t,e){return t[e.name]=e.formValue,t}),{})},onSubmit:function(t){t.preventDefault(),this.submit()},submit:function(){var t=this,e=this.getValues();this.validate().then((function(){t.$emit("submit",e)})).catch((function(n){t.$emit("failed",{values:e,errors:n}),t.scrollToError&&t.scrollToField(n[0].name)}))}},render:function(){var t=arguments[0];return t("form",{class:l(),on:{submit:this.onSubmit}},[this.slots()])}})},b47b:function(t,e,n){"use strict";n("599d")},b650:function(t,e,n){"use strict";var i=n("c31d"),o=n("2638"),a=n.n(o),r=n("d282"),l=n("ba31"),s=n("b1d2"),c=n("48f4"),u=n("ad06"),d=n("543e"),f=Object(r["a"])("button"),m=f[0],h=f[1];function b(t,e,n,i){var o,r=e.tag,f=e.icon,m=e.type,b=e.color,p=e.plain,g=e.disabled,v=e.loading,S=e.hairline,y=e.loadingText,x=e.iconPosition,w={};function O(t){v||g||(Object(l["a"])(i,"click",t),Object(c["a"])(i))}function T(t){Object(l["a"])(i,"touchstart",t)}b&&(w.color=p?b:s["f"],p||(w.background=b),-1!==b.indexOf("gradient")?w.border=0:w.borderColor=b);var k=[h([m,e.size,{plain:p,loading:v,disabled:g,hairline:S,block:e.block,round:e.round,square:e.square}]),(o={},o[s["c"]]=S,o)];function $(){return v?n.loading?n.loading():t(d["a"],{class:h("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"currentColor"}}):f?t(u["a"],{attrs:{name:f,classPrefix:e.iconPrefix},class:h("icon")}):void 0}function j(){var i,o=[];return"left"===x&&o.push($()),i=v?y:n.default?n.default():e.text,i&&o.push(t("span",{class:h("text")},[i])),"right"===x&&o.push($()),o}return t(r,a()([{style:w,class:k,attrs:{type:e.nativeType,disabled:g},on:{click:O,touchstart:T}},Object(l["b"])(i)]),[t("div",{class:h("content")},[j()])])}b.props=Object(i["a"])({},c["c"],{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"},iconPosition:{type:String,default:"left"}}),e["a"]=m(b)},bc1b:function(t,e,n){},be7f:function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("1a04"),n("1146")},db85:function(t,e,n){"use strict";function i(t){var e=[];function n(t){t.forEach((function(t){e.push(t),t.componentInstance&&n(t.componentInstance.$children.map((function(t){return t.$vnode}))),t.children&&n(t.children)}))}return n(t),e}function o(t,e){var n=e.$vnode.componentOptions;if(n&&n.children){var o=i(n.children);t.sort((function(t,e){return o.indexOf(t.$vnode)-o.indexOf(e.$vnode)}))}}n.d(e,"a",(function(){return o}))}}]);
//# sourceMappingURL=chunk-22ee4f4e.20a5a3a2.js.map